# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Backend —Å Frontend

–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é Laravel API –∫ React frontend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞ "–ó–µ–ª–µ–Ω—å".

## –®–∞–≥ 1: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω

```bash
cd /Users/timshare/Documents/diplom/backend_alsu
php artisan serve --port=3001
```

Backend –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:3001`

## –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ frontend

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `/Users/timshare/Documents/diplom/front_alsu/.env` –∏ –∏–∑–º–µ–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```env
# –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π API
VITE_USE_MOCK_API=false

# URL –≤–∞—à–µ–≥–æ Laravel backend
VITE_API_URL=http://localhost:3001/api

# –û—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
VITE_APP_NAME=–ó–µ–ª–µ–Ω—å - –†–µ—Å—Ç–æ—Ä–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–∏—Ç–∞–Ω–∏—è
VITE_APP_VERSION=1.0.0
```

## –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ apiService.js

–§–∞–π–ª `src/services/apiService.js` —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º API. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ —á–∏—Ç–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```javascript
const API_URL = import.meta.env.VITE_API_URL || "http://localhost:3001/api";
const USE_MOCK_API = import.meta.env.VITE_USE_MOCK_API === "true";
```

## –®–∞–≥ 4: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ frontend

```bash
cd /Users/timshare/Documents/diplom/front_alsu
npm run dev
```

## –®–∞–≥ 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –¢–µ—Å—Ç 1: –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –≤—Ö–æ–¥–∞
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:
   - Email: `admin@zelen.ru`
   - –ü–∞—Ä–æ–ª—å: `admin123`
4. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞ –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —à–∞–ø–∫–µ

### –¢–µ—Å—Ç 2: –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ–Ω—é

1. –ú–µ–Ω—é –¥–æ–ª–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è —Å —Ä–µ–∞–ª—å–Ω–æ–≥–æ backend
2. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å 18 –±–ª—é–¥ –∏–∑ seeder'–∞
3. –§–∏–ª—å—Ç—Ä—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å

### –¢–µ—Å—Ç 3: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞

1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (`test@example.com` / `password`)
2. –î–æ–±–∞–≤—å—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–ª—é–¥ –≤ –∫–æ—Ä–∑–∏–Ω—É
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–æ—Ä–∑–∏–Ω—É
4. –û—Ñ–æ—Ä–º–∏—Ç–µ –∑–∞–∫–∞–∑
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∑–∞–∫–∞–∑ –ø–æ—è–≤–∏–ª—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–∫–∞–∑–æ–≤

### –¢–µ—Å—Ç 4: –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –∞–¥–º–∏–Ω (`admin@zelen.ru` / `admin123`)
2. –ù–∞–∂–º–∏—Ç–µ "–£–ü–†–ê–í–õ–ï–ù–ò–ï –ú–ï–ù–Æ"
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ:
   - –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ –±–ª—é–¥–æ
   - –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ
   - –£–¥–∞–ª–∏—Ç—å –±–ª—é–¥–æ

### –¢–µ—Å—Ç 5: –ü–∞–Ω–µ–ª—å –¥–∏–µ—Ç–æ–ª–æ–≥–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –∑–∞—è–≤–∫—É –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é (–º–æ–∂–Ω–æ –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
2. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –¥–∏–µ—Ç–æ–ª–æ–≥ (`dietolog@zelen.ru` / `dietolog123`)
3. –ù–∞–∂–º–∏—Ç–µ "–ó–ê–Ø–í–ö–ò"
4. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—É—é –∑–∞—è–≤–∫—É
5. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏

## –û—Ç–ª–∏—á–∏—è –º–µ–∂–¥—É Mock –∏ Real API

### Mock API (VITE_USE_MOCK_API=true)
- –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `src/data/menuData.js`
- –ù–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –î–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
- –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ —Å–µ—Ç–∏ (800-2000ms)

### Real API (VITE_USE_MOCK_API=false)
- –î–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ MySQL –±–∞–∑—ã
- –†–µ–∞–ª—å–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ JWT —Ç–æ–∫–µ–Ω—ã
- –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–æ–≤ API

–í—Å–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç Laravel API –∏–º–µ—é—Ç –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç:

### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç
```json
{
  "success": true,
  "message": "–û–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ",
  "data": { /* –¥–∞–Ω–Ω—ã–µ */ }
}
```

### –û—Ç–≤–µ—Ç —Å –æ—à–∏–±–∫–æ–π
```json
{
  "success": false,
  "message": "–û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏",
  "error": "–î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏"
}
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª–∏

–û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) ‚Üí Console. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –ª–æ–≥–∏ –∑–∞–ø—Ä–æ—Å–æ–≤:

**Mock —Ä–µ–∂–∏–º:**
```
üîß Mock API Call: POST /auth/login { email: "...", password: "..." }
```

**Real —Ä–µ–∂–∏–º:**
```
API Request: POST http://localhost:3001/api/auth/login
```

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: CORS –æ—à–∏–±–∫–∞

**–°–∏–º–ø—Ç–æ–º:**
```
Access to fetch at 'http://localhost:3001/api/...' has been blocked by CORS policy
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `backend_alsu/config/cors.php`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `http://localhost:3000` —É–∫–∞–∑–∞–Ω –≤ `allowed_origins`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Laravel —Å–µ—Ä–≤–µ—Ä

### –ü—Ä–æ–±–ª–µ–º–∞: 401 Unauthorized

**–°–∏–º–ø—Ç–æ–º:**
```
{
  "message": "Unauthenticated"
}
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ header –∑–∞–ø—Ä–æ—Å–∞
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–π—Ç–∏ –∏ –≤–æ–π—Ç–∏ —Å–Ω–æ–≤–∞

### –ü—Ä–æ–±–ª–µ–º–∞: 500 Internal Server Error

**–°–∏–º–ø—Ç–æ–º:**
```
{
  "message": "Server Error"
}
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Laravel: `backend_alsu/storage/logs/laravel.log`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã: `php artisan migrate:status`

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–µ–Ω—é –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ seeder –≤—ã–ø–æ–ª–Ω–µ–Ω: `php artisan db:seed`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–ø—Ä–æ—Å –≤ Network tab DevTools
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞–ø—Ä—è–º—É—é: `curl http://localhost:3001/api/menu`

### –ü—Ä–æ–±–ª–µ–º–∞: Token –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `src/services/localStorage.js`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±—Ä–∞—É–∑–µ—Ä —Ä–∞–∑—Ä–µ—à–∞–µ—Ç localStorage
3. –û—á–∏—Å—Ç–∏—Ç–µ localStorage –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞

## –û—Ç–ª–∞–¥–∫–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ Backend

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
curl http://localhost:3001/api

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ–Ω—é
curl http://localhost:3001/api/menu

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
curl -X POST http://localhost:3001/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"admin@zelen.ru","password":"admin123"}'
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ Frontend

–û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Network tab:
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç –Ω–∞ `http://localhost:3001/api`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Status Code (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 200 –¥–ª—è —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Response (–¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å `"success": true`)

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –í–æ–π–¥–∏—Ç–µ –≤ MySQL
mysql -u zelen_user -p zelen_restaurant

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—ã
SHOW TABLES;

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
SELECT * FROM users;

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–µ–Ω—é
SELECT * FROM menu_items;

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–∫–∞–∑—ã
SELECT * FROM orders;
```

## –ü—Ä–æ–¥–∞–∫—à–µ–Ω

–î–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ:

### Backend

1. –ò–∑–º–µ–Ω–∏—Ç–µ `.env`:
```env
APP_ENV=production
APP_DEBUG=false
APP_URL=https://your-domain.com

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ cookies
SESSION_SECURE_COOKIE=true
```

2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ CORS:
```php
// config/cors.php
'allowed_origins' => [
    'https://your-frontend-domain.com'
],
```

3. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ:
```bash
php artisan config:cache
php artisan route:cache
php artisan view:cache
```

### Frontend

1. –û–±–Ω–æ–≤–∏—Ç–µ `.env.production`:
```env
VITE_USE_MOCK_API=false
VITE_API_URL=https://your-api-domain.com/api
```

2. –°–æ–±–µ—Ä–∏—Ç–µ:
```bash
npm run build
```

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Laravel Sanctum Documentation](https://laravel.com/docs/10.x/sanctum)
- [CORS Configuration](https://laravel.com/docs/10.x/routing#cors)
- [API Resources](https://laravel.com/docs/10.x/eloquent-resources)
- [Vite Environment Variables](https://vitejs.dev/guide/env-and-mode.html)

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Laravel: `backend_alsu/storage/logs/laravel.log`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12 ‚Üí Console)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab –≤ DevTools
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã

---

–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –≤–∞—à React frontend –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å Laravel backend.
